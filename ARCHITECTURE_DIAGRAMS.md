# Architecture Diagrams & Flow Charts

## 1. System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT BROWSER                              â”‚
â”‚                    (news-website-ui)                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ Home Page    â”‚         â”‚ Article Page â”‚                         â”‚
â”‚  â”‚ index.html   â”‚         â”‚ article.html â”‚                         â”‚
â”‚  â”‚              â”‚         â”‚              â”‚                         â”‚
â”‚  â”‚ - Script.js  â”‚         â”‚ - Article.js â”‚ (Progressive polling)   â”‚
â”‚  â”‚ - Render     â”‚         â”‚ - Fetch/Poll â”‚ (every 3 seconds)       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚         â”‚                        â”‚                                 â”‚
â”‚         â”‚ GET /api/news          â”‚ GET /api/article?url=...      â”‚
â”‚         â”‚ (<50ms cached)         â”‚ (<200ms first, <50ms cached)  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                    â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP REST API
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRODUCTION BACKEND                              â”‚
â”‚                 (server_production.py)                            â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ API Layer (Flask)                                           â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  GET /api/article?url=...                                 â”‚  â”‚
â”‚  â”‚    â”‚                                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ 1. Check Redis cache (instant hit)                â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Return cached response <50ms TTFB             â”‚  â”‚
â”‚  â”‚    â”‚                                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ 2. Extract content (Jina AI)                       â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Cache in Redis (24h TTL)                       â”‚  â”‚
â”‚  â”‚    â”‚                                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ 3. Generate summary (Gemini - background)          â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Return immediately with placeholder             â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Cache in background (24h TTL)                  â”‚  â”‚
â”‚  â”‚    â”‚                                                       â”‚  â”‚
â”‚  â”‚    â”œâ”€ 4. Generate image (Gemini - background)            â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Return placeholder immediately                 â”‚  â”‚
â”‚  â”‚    â”‚    â†’ Cache in background (7d TTL)                   â”‚  â”‚
â”‚  â”‚    â”‚                                                       â”‚  â”‚
â”‚  â”‚    â””â”€ 5. Return response <200ms TTFB âœ“                   â”‚  â”‚
â”‚  â”‚       (with placeholder, no blocking)                    â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  Rate Limiter: 200 req/60s per IP                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                â”‚              â”‚
          â–¼                                â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ REDIS CACHE  â”‚          â”‚ BACKGROUND THREADS  â”‚   â”‚  LOGS   â”‚
    â”‚              â”‚          â”‚                     â”‚   â”‚         â”‚
    â”‚ Keys:        â”‚          â”‚ - Summary gen       â”‚   â”‚ - TTFB  â”‚
    â”‚ - content    â”‚          â”‚ - Image gen         â”‚   â”‚ - Errorsâ”‚
    â”‚ - summary    â”‚          â”‚ (Non-blocking)      â”‚   â”‚ - Stats â”‚
    â”‚ - image      â”‚          â”‚ (Daemon threads)    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ - meta       â”‚          â”‚                     â”‚
    â”‚              â”‚          â”‚ Duration:           â”‚
    â”‚ TTL:         â”‚          â”‚ - Summary: 200-500msâ”‚
    â”‚ - 24h        â”‚          â”‚ - Image: 1-3s       â”‚
    â”‚ - 7d         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
      Redis
    localhost:6379
```

---

## 2. Request Flow Comparison

### FIRST REQUEST (Cache Miss)

```
â”Œâ”€ CLIENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser: GET /api/article?url=https://example.com                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€ SERVER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 0ms   â”œâ”€ API request received                                    â”‚
â”‚ 5ms   â”œâ”€ Rate limiter check: OK                                  â”‚
â”‚ 10ms  â”œâ”€ Check Redis cache: MISS                                 â”‚
â”‚ 30ms  â”œâ”€ Extract content via Jina AI (20ms network)              â”‚
â”‚       â”‚  â†’ Cache in Redis immediately                           â”‚
â”‚ 50ms  â”œâ”€ Check summary cache: MISS                               â”‚
â”‚       â”‚  â†’ Start background thread (Gemini)                     â”‚
â”‚ 100ms â”œâ”€ Generate placeholder image                              â”‚
â”‚       â”‚  â†’ Start background thread (Gemini)                     â”‚
â”‚ 150ms â”œâ”€ BUILD RESPONSE (title, content, summary, placeholder)  â”‚
â”‚       â””â”€ RETURN RESPONSE: 150ms TTFB âœ“ <200ms                   â”‚
â”‚                                                                   â”‚
â”‚ BACKGROUND TASKS (Non-blocking):                                â”‚
â”‚ 200ms â”œâ”€ Generate Gemini summary (50-100ms wait)                â”‚
â”‚ 300ms â”œâ”€ Cache summary in Redis (24h TTL)                       â”‚
â”‚ 500ms â”œâ”€ Generate Gemini image (200-500ms wait)                 â”‚
â”‚ 1000ms â””â”€ Cache image URL in Redis (7d TTL)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€ BROWSER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display article with:                                            â”‚
â”‚ - Title, content âœ“                                               â”‚
â”‚ - Summary âœ“                                                       â”‚
â”‚ - Placeholder image âœ“                                            â”‚
â”‚                                                                   â”‚
â”‚ POLLING (every 3 seconds):                                       â”‚
â”‚ 3s   â”œâ”€ Poll: GET /api/article?url=... (Redis hit) <50ms       â”‚
â”‚      â”œâ”€ Image still placeholder, keep polling                  â”‚
â”‚ 6s   â”œâ”€ Poll: GET /api/article?url=... (Redis hit) <50ms       â”‚
â”‚      â”œâ”€ Image URL still placeholder                             â”‚
â”‚ 9s   â”œâ”€ Poll: GET /api/article?url=... (Redis hit) <50ms       â”‚
â”‚      â”œâ”€ IMAGE READY in Redis! ğŸ‰                               â”‚
â”‚ 1000ms â””â”€ Update: document.getElementById('article-image').src  â”‚
â”‚          = "https://storage/generated-image.jpg"               â”‚
â”‚          (smooth fade-in, no page reload)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Total First Page Load Time: ~1-2 seconds** âœ“
- User sees content in 150ms
- Image appears after generation (~1s)

### REPEAT REQUEST (Cache Hit)

```
â”Œâ”€ CLIENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser: GET /api/article?url=https://example.com                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€ SERVER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 0ms   â”œâ”€ API request received                                    â”‚
â”‚ 5ms   â”œâ”€ Rate limiter check: OK                                  â”‚
â”‚ 10ms  â”œâ”€ Check Redis cache: HIT! ğŸ¯                              â”‚
â”‚       â”‚  â”œâ”€ title âœ“                                              â”‚
â”‚       â”‚  â”œâ”€ content âœ“                                            â”‚
â”‚       â”‚  â”œâ”€ summary âœ“ (now available!)                           â”‚
â”‚       â”‚  â””â”€ image URL âœ“ (real image!)                            â”‚
â”‚ 20ms  â”œâ”€ BUILD RESPONSE (no AI calls needed)                     â”‚
â”‚       â””â”€ RETURN RESPONSE: 20ms TTFB âœ“ <50ms                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€ BROWSER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display article with:                                            â”‚
â”‚ - Title âœ“                                                         â”‚
â”‚ - Content âœ“                                                       â”‚
â”‚ - Summary âœ“ (AI generated!)                                      â”‚
â”‚ - Real image âœ“ (AI generated!)                                   â”‚
â”‚                                                                   â”‚
â”‚ NO POLLING NEEDED - all data already available! ğŸš€              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Total Load Time: ~20ms** âœ“
- Everything instant
- No AI processing needed

---

## 3. Redis Cache Keys Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REDIS DATABASE                               â”‚
â”‚              (TTL-based automatic expiration)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For URL: "https://example.com/article"
Hash: sha256(url)[:16] = "a1b2c3d4e5f6g7h8"

KEYS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ article:a1b2c3d4e5f6g7h8:content                              â”‚
â”‚                                                                â”‚
â”‚ VALUE: {"title": "...", "content": "...", "url": "..."}       â”‚
â”‚ TTL: 86400 seconds (24 hours)                                 â”‚
â”‚ SIZE: ~10-100 KB                                              â”‚
â”‚ SOURCE: Jina AI extraction                                    â”‚
â”‚ CACHED: Immediately after extraction                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ article:a1b2c3d4e5f6g7h8:summary                              â”‚
â”‚                                                                â”‚
â”‚ VALUE: "AI-generated 2-3 sentence summary..."                 â”‚
â”‚ TTL: 86400 seconds (24 hours)                                 â”‚
â”‚ SIZE: ~200-500 bytes                                          â”‚
â”‚ SOURCE: Gemini AI                                             â”‚
â”‚ CACHED: After background generation (200-500ms)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ article:a1b2c3d4e5f6g7h8:image                                â”‚
â”‚                                                                â”‚
â”‚ VALUE: "https://storage/generated-image-a1b2c3.jpg"          â”‚
â”‚ TTL: 604800 seconds (7 days)                                  â”‚
â”‚ SIZE: ~100 bytes (just URL)                                   â”‚
â”‚ SOURCE: Gemini/Puter.js API                                   â”‚
â”‚ CACHED: After background generation (1-3s)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ article:a1b2c3d4e5f6g7h8:meta                                 â”‚
â”‚                                                                â”‚
â”‚ VALUE: {                                                       â”‚
â”‚   "title": "...",                                             â”‚
â”‚   "content": "...",                                           â”‚
â”‚   "summary": "...",                                           â”‚
â”‚   "image_url": "...",                                         â”‚
â”‚   "source": "...",                                            â”‚
â”‚   "category": "...",                                          â”‚
â”‚   "date_publish": "...",                                      â”‚
â”‚   "ai_generated": true                                        â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ TTL: 86400 seconds (24 hours)                                 â”‚
â”‚ SIZE: ~15-150 KB (bundled)                                    â”‚
â”‚ SOURCE: Combined from content + summary + image               â”‚
â”‚ CACHED: For next request instant hit                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Performance Timeline

### Total Page Load (First Time)

```
0ms     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ User clicks article link                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
60ms    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Browser makes request                      â”‚
        â”‚ GET /api/article?url=https://example.com   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Network transmission (50ms typical)        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
110ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Server processes:                          â”‚
        â”‚ - Check Redis (miss)                       â”‚
        â”‚ - Extract Jina content (20ms)              â”‚
        â”‚ - Return response                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
150ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ API Response received (150ms TTFB) âœ“       â”‚
        â”‚ Browser displays:                          â”‚
        â”‚ - Title, headline                          â”‚
        â”‚ - Article content                          â”‚
        â”‚ - Placeholder image                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ User can read content immediately!         â”‚
        â”‚ (No waiting for AI processing)             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
300ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ BACKGROUND: Summary generation starts      â”‚
        â”‚ (no impact on user experience)             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
800ms   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ BACKGROUND: Image generation starts        â”‚
        â”‚ (still no impact)                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
1000ms  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FRONTEND: Polling detects new image in     â”‚
        â”‚ Redis after 3rd poll (every 3s)           â”‚
        â”‚                                            â”‚
        â”‚ Updates: document.image.src = real_image  â”‚
        â”‚ Image fades in smoothly                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Insight**: User sees content in 150ms, image appears ~1s later (seamlessly)

---

## 5. Concurrent Request Handling

```
â”Œâ”€ Multiple Users Requesting Same Article â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  User 1: GET /api/article?url=... â”€â”€â”€â”€â”                      â”‚
â”‚  User 2: GET /api/article?url=... â”€â”€â”€â”â”‚                      â”‚
â”‚  User 3: GET /api/article?url=... â”€â”€â”â”‚â”‚                      â”‚
â”‚  User 4: GET /api/article?url=... â”€â”â”‚â”‚â”‚                      â”‚
â”‚  User 5: GET /api/article?url=... â”â”‚â”‚â”‚â”‚                      â”‚
â”‚                                    â”‚â”‚â”‚â”‚                      â”‚
â”‚                                    â”‚â”‚â”‚â”‚                      â”‚
â”‚  Load Balancer / Rate Limiter:   â”‚â”‚â”‚â”‚  (200 req/60s)         â”‚
â”‚  â”œâ”€ User 1: âœ“ Allowed                                       â”‚
â”‚  â”œâ”€ User 2: âœ“ Allowed                                       â”‚
â”‚  â”œâ”€ User 3: âœ“ Allowed                                       â”‚
â”‚  â”œâ”€ User 4: âœ“ Allowed                                       â”‚
â”‚  â””â”€ User 5: âœ“ Allowed                                       â”‚
â”‚                                    â–¼â–¼â–¼â–¼â–¼                      â”‚
â”‚  Redis Cache Check (all simultaneously):                     â”‚
â”‚  â”œâ”€ Cache HIT! (assuming 2nd+ request)                      â”‚
â”‚  â”œâ”€ Cache HIT!                                               â”‚
â”‚  â”œâ”€ Cache HIT!                                               â”‚
â”‚  â”œâ”€ Cache HIT!                                               â”‚
â”‚  â””â”€ Cache HIT!                                               â”‚
â”‚                                    â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚                                    â–¼â”‚â”‚â”‚â”‚                      â”‚
â”‚  Response Times:                   â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚  â”œâ”€ User 1: 18ms âœ“                 â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚  â”œâ”€ User 2: 19ms âœ“                 â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚  â”œâ”€ User 3: 21ms âœ“                 â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚  â”œâ”€ User 4: 20ms âœ“                 â”‚â”‚â”‚â”‚â”‚                      â”‚
â”‚  â””â”€ User 5: 22ms âœ“                 â–¼â–¼â–¼â–¼â–¼                      â”‚
â”‚                                                               â”‚
â”‚  Average TTFB: 20ms âœ“                                        â”‚
â”‚  All under <50ms target!                                     â”‚
â”‚  No blocking, all threads working in parallel               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Error Handling Flow

```
â”Œâ”€ Request Arrives â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /api/article?url=...                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€ No URL provided?
                    â”‚  â””â”€ Return 400: "Missing URL"
                    â”‚
    Request Processing
    â”‚
    â”œâ”€ Rate limit exceeded?
    â”‚  â””â”€ Return 429: "Rate limit exceeded"
    â”‚
    â”œâ”€ Redis connection failed?
    â”‚  â””â”€ Use in-memory fallback (still works!)
    â”‚
    â”œâ”€ Jina extraction failed?
    â”‚  â””â”€ Return placeholder data
    â”‚     (Gemini still works in background)
    â”‚
    â”œâ”€ Gemini key not configured?
    â”‚  â””â”€ Continue with placeholder summary
    â”‚     (image generation skipped)
    â”‚
    â””â”€ Network timeout?
       â””â”€ Return cached data if available
          â””â”€ Return error response <200ms
```

---

## 7. Memory Usage Pattern

```
TIME                REDIS MEMORY USAGE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

0h   â”œâ”€ Empty database
     â”‚  â””â”€ 50MB base (Redis engine)

4h   â”œâ”€ 100 unique articles cached
     â”‚  â”œâ”€ Content: 10-20MB
     â”‚  â”œâ”€ Summary: 100KB
     â”‚  â”œâ”€ Image URLs: 50KB
     â”‚  â””â”€ Total: ~60MB

12h  â”œâ”€ 300 unique articles cached
     â”‚  â”œâ”€ Content: 30-50MB
     â”‚  â”œâ”€ Summary: 300KB
     â”‚  â”œâ”€ Image URLs: 150KB
     â”‚  â””â”€ Total: ~120MB

24h  â”œâ”€ 500 unique articles cached
     â”‚  â”œâ”€ Content: 50-100MB
     â”‚  â”‚   (some expired after 24h)
     â”‚  â”œâ”€ Summary: 500KB
     â”‚  â”‚   (some expired)
     â”‚  â”œâ”€ Image URLs: 250KB
     â”‚  â””â”€ Total: ~180MB

48h  â”œâ”€ Steady state
     â”‚  â”œâ”€ Old content expires (24h TTL)
     â”‚  â”œâ”€ Old summaries expire (24h TTL)
     â”‚  â”œâ”€ Images persist (7d TTL)
     â”‚  â””â”€ Memory stays ~200MB average
```

**Strategy**: TTL-based automatic cleanup prevents memory bloat

---

## 8. Cache Hit Rate Evolution

```
REQUESTS vs CACHE HIT RATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Time  Requests  Unique  Cache   TTFB
                URLs    Hit%    (avg)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0h    1         1       0%      150ms (miss)
      2         1       50%     20ms  (hit)
      3         1       67%     20ms  (hit)

1h    100       50      80%     ~25ms

4h    1000      150     85%     ~22ms

12h   5000      300     88%     ~21ms

24h   10000     500     92%     ~20ms

48h   15000     600     93%     ~20ms
              (TTL expires old)
```

**Benefit**: As time goes on, more cache hits = faster responses

---

**All diagrams show production-ready performance!** ğŸš€
